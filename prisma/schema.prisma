// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  STUDENT
  PARENT
  TEACHER
}

model User {
  id              Int      @id @default(autoincrement())
  name            String
  email           String   @unique
  role            Role
  firebaseAuthUID String   @unique
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  userRelated UserRelated[]
  Board       Board[]
}

enum PrivilegeStatus {
  PENDING
  REJECTED
  APPROVED
  IFAUTHOR
}

model UserRelated {
  id               Int                @id @default(autoincrement())
  user             User               @relation(fields: [ownerId], references: [id])
  ownerId          Int
  giverId          Int
  relatedPrivilege RelatedPrivilege[]
}

enum REST {
  CREATE
  READ
  UPDATE
  DELETE
}

model RelatedPrivilege {
  id            Int             @id @default(autoincrement())
  userRelated   UserRelated     @relation(fields: [userRelatedId], references: [id])
  userRelatedId Int
  table         String // which table to set privilege
  status        PrivilegeStatus @default(PENDING)
  action        REST
}

enum DAY {
  MON
  TUE
  WED
  THU
  FRI
  SAT
  SUN
}

model Board {
  id          Int    @id @default(autoincrement())
  user        User   @relation(fields: [userId], references: [id])
  userId      Int
  title       String
  description String
  cycle       DAY[]
}
